<!-- html for page 3 (breathing exercises) -->
<html>
  <head>
    <link rel="stylesheet" href="page3.css">
  </head>

  <body>
    <center>
      <!-- constant title, buttons etc that stay on the page -->
      <button onclick="location.href='index.html'">breatheINDAcalm</button>
      <h1>breathing exercises</h1>
      <div class="breathing-button">
        <h3>select a breathing exercise</h2>
        <button id="button-b1">breathing in a square</button> 
        <button id="button-b2">4 - 7 - 8</button>
        <button id="button-b3">visual breathing</button>
      </div>
      
      <!-- first breathing exercise container (breathing in a square) -->
      <div id="breathe-1">
        <h2>breathing in a square</h2>
        <div id="square"> <!-- visual for square breathing -->
          <div id="ball"></div>
          <div id="realSquare">
            <div id="text"></div>
          </div>
        </div>
        <button id="button">click here to start</button> <!-- start button -->
        <button id="buttoni">i</button> <!-- infobutton that can close and open-->
        <div id="infoBox">
          This is breathing exercise where you breathe <br />
          in a square. <br />
          The breathing exercise involves 5 second <br />
          intervals of inhaling, exhaling and holding <br />
          your breath.
          <br />
          <br />
          To go back to the home page with the menu, <br />
          simply click on the "breatheINDAcalm"-button <br />
          at the top of the page.
          <span id="closeButton">&times;</span>
        </div>
      </div>

      <!-- second breathing exercise container (478) -->
      <div id="breathe-2">
        <h2>4 - 7 - 8</h2>
        <div class="container"> <!-- the expanding/shrinking circle that visually represents the breathing -->
          <div id="circle-container">
            <div id="circle">
              <div id="timer-text">Breathe in</div>
            </div>
          </div>
          <br>
          <button id="start-button">click here to start</button> <!-- button that starts the breathing exercise -->
        </div>
        </div>
      </div>

      <!-- third breathing exercise container (calming gifs) -->
      <div id="breathe-3">
        <h2>select a button for visual breathing</h2>
        <br><br>
        <div> <!-- the size and id of the gifs, with the starting gif -->
            <img 
            src="https://cdn.doyou.com/articles/7b-1575919919782.gif=w1080"
            alt="My GIF"
            width="400"
            height="400"
            id="gb1-gif"
            />
        </div>
        
        <div> <!-- buttons for different gifs -->
            <button class="gb" onclick="show1()">air balloon</button>
            <button class="gb" onclick="show2()">moon</button>
            <button class="gb" onclick="show3()">calm person</button>
        </div>
      </div>

      <script type="text/javascript">
        // main functions for the constant buttons and containers 
        const buttonb1 = document.getElementById("button-b1")
        const buttonb2 = document.getElementById("button-b2")
        const buttonb3 = document.getElementById("button-b3")
        const breathe1 = document.getElementById("breathe-1");
        const breathe2 = document.getElementById("breathe-2");
        const breathe3 = document.getElementById("breathe-3");
        
        //gifs
        const gifimg = document.getElementById("gb1-gif")

        // script for the square breathing exersice
        const button = document.getElementById("button"); // start button
        const infoBox = document.getElementById("infoBox");
        const closeButton = document.getElementById("closeButton"); // close button for the infobox
        const buttoni = document.getElementById("buttoni"); // the infobox button 
        var square = document.getElementById("square"); // square that the circle moves along 
        var realSquare = document.getElementById("realSquare"); // the square that shows 
        var text = document.getElementById("text"); // the inhale, hold, exhale text inside square
        var ball = document.getElementById("ball");
        var squareWidth = square.offsetWidth - ball.offsetWidth;
        var squareHeight = square.offsetHeight - ball.offsetHeight;


        let x = 0;
        let y = squareHeight;
        let directionX = 1;
        let directionY = 1;
        let speed = 1;

        // the function that moves the ball across the square 
        function moveBall() {
          if (x >= squareWidth && y < squareHeight) {
            y += speed;
            text.textContent = "exhale";
            text.style.color = "#e2f2f7";
          } else if (y >= squareHeight && x > 0) {
            x -= speed;
            text.textContent = "hold";
            text.style.color = "#0a6e87";
          } else if (x <= 0 && y > 0) {
            y -= speed;
            text.textContent = "inhale";
            text.style.color = "#e2f2f7";
          } else {
            x += speed;
            text.textContent = "hold";
            text.style.color = "#0a6e87";
          }
          ball.style.top = y + "px";
          ball.style.left = x + "px";
        }

        // to start moving the ball when the start button is pressed, and will only allow it to be pressed once
        button.addEventListener("click", start);
        var number = 0;

        function start() {
          if (number == 0) {
            setInterval(moveBall, 14);
            number++;
          }
        }

        // function to know if the inbox should close or open when the button is selected
        buttoni.addEventListener("click", openOrClose);
        var num = 1;
        function openOrClose() {
          if (num % 2 != 0) {
            popUp();
          } else {
            infoBox.style.display = "none";
          }
          num++;
        }

        function popDown() {}

        function popUp() {
          infoBox.style.display = "block";
        }
        closeButton.addEventListener("click", function () {
          num++;
          infoBox.style.display = "none";
        });

        // the buttons to select which breathing exercise to show
        buttonb1.addEventListener("click", display1);
        function display1() {
          breathe1.style.display = "block";
          breathe2.style.display = "none";
          breathe3.style.display = "none";
        }

        buttonb2.addEventListener("click", display2);
        function display2() {
          breathe1.style.display = "none";
          breathe2.style.display = "block";
          breathe3.style.display = "none";
        }

        buttonb3.addEventListener("click", display3);
        function display3() {
          breathe1.style.display = "none";
          breathe2.style.display = "none";
          breathe3.style.display = "block";
        }

          breathe1.style.display = "block";
          breathe2.style.display = "none";
          breathe3.style.display = "none";


      // the gifs 
      function show1() {
        gifimg.src = "https://cdn.doyou.com/articles/7b-1575919919782.gif=w1080";
      }

      function show2() {
        gifimg.src = "https://i.gifer.com/embedded/download/6EGj.gif";
      }

      function show3() {
        gifimg.src = "https://mir-s3-cdn-cf.behance.net/project_modules/max_1200/0a2ba2111109037.5ffc84dc1d61d.gif";
      }
      
      window.addEventListener('DOMContentLoaded', function() {
      var timerElement = document.getElementById('timer-text');
      var circleElement = document.getElementById('circle');
      var startButton = document.getElementById('start-button');
      var inhaleTime = 4; // Inhale time in seconds
      var holdTime = 7;   // Hold time in seconds
      var exhaleTime = 8; // Exhale time in seconds

      // function that expands/shrinks the circle for the 478-breathing exercise
      function startTimer() {
        timerElement.innerHTML = 'Breathe in';
        circleElement.classList.add('expand');
        setTimeout(function() {
          timerElement.innerHTML = 'Hold';
          setTimeout(function() {
            timerElement.innerHTML = 'Exhale';
            circleElement.classList.add('shrink');
            setTimeout(function() {
              timerElement.innerHTML = 'Breathe in';
              circleElement.classList.remove('shrink');
              circleElement.classList.add('expand');
              startTimer();
            }, inhaleTime * 1000);
          }, holdTime * 1000);
        }, inhaleTime * 1000);
      }

      startButton.addEventListener('click', function() {
        startTimer();
      });
    });
      </script>
    </center>
  </body>
</html>
